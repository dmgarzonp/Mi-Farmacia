<div class="max-w-4xl mx-auto space-y-6 pb-12">
  <div *ngIf="!isModalMode" class="flex items-center justify-between animate-fade-in">
    <div>
      <h1 class="text-3xl font-black text-gray-900 tracking-tight">
        {{ isEditMode ? 'Editar' : 'Nuevo' }} Proveedor
      </h1>
      <p class="text-xs font-bold text-gray-400 uppercase tracking-widest mt-1">
        {{ isEditMode ? 'Actualización de datos del socio estratégico' : 'Registro de nuevo socio comercial' }}
      </p>
    </div>
    <app-button variant="secondary" (clicked)="volver()" iconNameLeft="BACK">
      Regresar al Listado
    </app-button>
  </div>

  <div class="bg-white/80 backdrop-blur-xl border border-white/20 shadow-premium p-10 rounded-[2rem] animate-slide-up relative overflow-hidden">
    <!-- Decoración de fondo -->
    <div class="absolute top-0 right-0 w-64 h-64 bg-primary-500/5 rounded-full blur-3xl -mr-32 -mt-32"></div>
    
    <!-- Navegación por pestañas -->
    <div class="flex items-center gap-2 mb-10 bg-gray-50/50 p-1.5 rounded-2xl border border-gray-100 relative z-10 w-fit">
      <button 
        type="button"
        (click)="activeTab.set('empresa')"
        [class.bg-white]="activeTab() === 'empresa'"
        [class.text-primary-600]="activeTab() === 'empresa'"
        [class.shadow-md]="activeTab() === 'empresa'"
        [class.border-gray-100]="activeTab() === 'empresa'"
        [class.text-gray-400]="activeTab() !== 'empresa'"
        class="flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all border border-transparent hover:text-primary-500"
      >
        <span class="w-4 h-4 block" [innerHTML]="icons.TRUCK | safeHtml"></span>
        Información Empresa
      </button>
      <button 
        type="button"
        (click)="activeTab.set('contacto')"
        [class.bg-white]="activeTab() === 'contacto'"
        [class.text-emerald-600]="activeTab() === 'contacto'"
        [class.shadow-md]="activeTab() === 'contacto'"
        [class.border-gray-100]="activeTab() === 'contacto'"
        [class.text-gray-400]="activeTab() !== 'contacto'"
        class="flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all border border-transparent hover:text-emerald-500"
      >
        <span class="w-4 h-4 block" [innerHTML]="icons.USERS | safeHtml"></span>
        Persona de Contacto
      </button>
    </div>
    
    <form [formGroup]="form" (ngSubmit)="guardar()" class="space-y-12 relative z-10">
      
      <!-- Pestaña: Información de la Empresa -->
      <div *ngIf="activeTab() === 'empresa'" class="space-y-8 animate-fade-in">
        <div class="flex items-center gap-4">
          <div class="w-10 h-10 rounded-xl bg-primary-100 flex items-center justify-center text-primary-600">
            <span class="w-6 h-6 block" [innerHTML]="icons.TRUCK | safeHtml"></span>
          </div>
          <div>
            <h3 class="text-sm font-black text-gray-800 uppercase tracking-widest">Datos Corporativos</h3>
            <p class="text-[10px] text-gray-400 font-bold uppercase tracking-tighter">Identificación fiscal y ubicación principal</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="md:col-span-2">
            <app-input
              label="Nombre o Razón Social"
              formControlName="nombreEmpresa"
              placeholder="Ej: Distribuidora Farmacéutica del Pacífico S.A."
              [required]="true"
              [hasError]="!!(form.get('nombreEmpresa')?.invalid && form.get('nombreEmpresa')?.touched)"
              errorMessage="El nombre de la empresa es obligatorio"
            ></app-input>
          </div>

          <app-input
            label="RUC / Identificación Fiscal"
            formControlName="ruc"
            placeholder="Ej: 1792345678001"
            [hasError]="!!(form.get('ruc')?.invalid && form.get('ruc')?.touched)"
            errorMessage="Ingrese un RUC válido"
          ></app-input>

          <app-input
            label="Teléfono Corporativo"
            formControlName="telefonoEmpresa"
            placeholder="Ej: (02) 2345-678"
          ></app-input>

          <div class="md:col-span-2">
            <app-input
              label="Email de la Empresa"
              formControlName="emailEmpresa"
              placeholder="Ej: ventas@empresa.com.ec"
              [hasError]="!!(form.get('emailEmpresa')?.invalid && form.get('emailEmpresa')?.touched)"
              errorMessage="Ingrese un correo electrónico válido"
            ></app-input>
          </div>

          <div class="md:col-span-2">
            <app-input
              label="Dirección Principal / Almacén"
              formControlName="direccion"
              placeholder="Ej: Av. Amazonas N32-123 y Mariana de Jesús, Quito"
            ></app-input>
          </div>
        </div>
      </div>

      <!-- Pestaña: Información del Contacto -->
      <div *ngIf="activeTab() === 'contacto'" class="space-y-8 animate-fade-in">
        <div class="flex items-center gap-4">
          <div class="w-10 h-10 rounded-xl bg-emerald-100 flex items-center justify-center text-emerald-600">
            <span class="w-6 h-6 block" [innerHTML]="icons.USERS | safeHtml"></span>
          </div>
          <div>
            <h3 class="text-sm font-black text-gray-800 uppercase tracking-widest">Ejecutivo Asignado</h3>
            <p class="text-[10px] text-gray-400 font-bold uppercase tracking-tighter">Persona responsable de la atención directa</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="md:col-span-2">
            <app-input
              label="Nombre del Asesor / Ejecutivo"
              formControlName="nombreContacto"
              placeholder="Nombre y Apellido del contacto directo"
            ></app-input>
          </div>

          <app-input
            label="Cargo / Departamento"
            formControlName="cargoContacto"
            placeholder="Ej: Jefe de Ventas / Ejecutivo Comercial"
          ></app-input>

          <app-input
            label="Celular del Contacto"
            formControlName="telefonoContacto"
            placeholder="Ej: 099 123 4567"
          ></app-input>

          <div class="md:col-span-2">
            <app-input
              label="Email Directo"
              formControlName="emailContacto"
              placeholder="Ej: ejecutivo@empresa.com"
              [hasError]="!!(form.get('emailContacto')?.invalid && form.get('emailContacto')?.touched)"
              errorMessage="Ingrese un correo válido"
            ></app-input>
          </div>
        </div>
      </div>

      <div class="flex justify-end gap-4 pt-10 border-t border-gray-100">
        <app-button type="button" variant="secondary" (clicked)="volver()" iconNameLeft="CANCEL">
          Descartar
        </app-button>
        <app-button type="submit" variant="primary" [disabled]="form.invalid || guardando" iconNameLeft="SAVE" class="min-w-[200px] shadow-lg shadow-primary-500/20">
          {{ guardando ? 'Guardando...' : (isEditMode ? 'Actualizar Información' : 'Registrar Proveedor') }}
        </app-button>
      </div>
    </form>
  </div>
</div>
