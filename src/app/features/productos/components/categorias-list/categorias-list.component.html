<div class="space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-bold text-gray-900">Categorías</h1>
      <p class="text-gray-600 mt-1">Gestiona las categorías de productos</p>
    </div>
    <app-button variant="primary" (clicked)="abrirModal()" iconNameLeft="ADD">
      Nueva Categoría
    </app-button>
  </div>

  <app-table
    [columns]="columns"
    [data]="categoriasService.categorias()"
    [actions]="actions"
    [searchable]="true"
    [loading]="categoriasService.loading()"
    emptyMessage="No hay categorías registradas"
    emptyCtaLabel="Crear mi primera categoría"
    emptyCtaIcon="ADD"
    (emptyCtaClicked)="abrirModal()"
  ></app-table>

  <!-- Modal de Formulario -->
  <app-modal
    [isOpen]="mostrarModal"
    [title]="editando ? 'Editar Categoría' : 'Nueva Categoría'"
    (closed)="cerrarModal()"
  >
    <form [formGroup]="form" (ngSubmit)="guardar()" class="space-y-6">
      <app-input
        label="Nombre de la Categoría"
        formControlName="nombre"
        placeholder="Ej: Antibióticos, Analgésicos..."
        [required]="true"
        [hasError]="!!(form.get('nombre')?.invalid && form.get('nombre')?.touched)"
        errorMessage="El nombre es requerido (mín. 2 caracteres)"
      ></app-input>
      
      <div class="flex justify-end gap-3 pt-4 border-t border-gray-100">
        <app-button type="button" variant="secondary" (clicked)="cerrarModal()" iconNameLeft="CANCEL">
          Cancelar
        </app-button>
        <app-button type="submit" variant="primary" [disabled]="form.invalid || guardando" iconNameLeft="SAVE">
          {{ guardando ? 'Guardando...' : 'Guardar Categoría' }}
        </app-button>
      </div>
    </form>
  </app-modal>
</div>
