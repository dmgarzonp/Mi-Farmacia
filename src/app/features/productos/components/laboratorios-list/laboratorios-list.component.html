<div class="space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-bold text-gray-900">Laboratorios</h1>
      <p class="text-gray-600 mt-1">Gestiona los fabricantes de los productos</p>
    </div>
    <app-button variant="primary" (clicked)="abrirModal()" iconNameLeft="ADD">
      Nuevo Laboratorio
    </app-button>
  </div>

  <app-table
    [columns]="columns"
    [data]="laboratoriosService.laboratorios()"
    [actions]="actions"
    [searchable]="true"
    [loading]="laboratoriosService.loading()"
    emptyMessage="No hay laboratorios registrados"
    emptyCtaLabel="Crear mi primer laboratorio"
    emptyCtaIcon="ADD"
    (emptyCtaClicked)="abrirModal()"
  ></app-table>

  <!-- Modal de Formulario -->
  <app-modal
    [isOpen]="mostrarModal"
    [title]="editando ? 'Editar Laboratorio' : 'Nuevo Laboratorio'"
    (closed)="cerrarModal()"
  >
    <form [formGroup]="form" (ngSubmit)="guardar()" class="space-y-6">
      <app-input
        label="Nombre del Laboratorio"
        formControlName="nombre"
        placeholder="Ej: Pfizer, Roche, Genfar..."
        [required]="true"
        [hasError]="!!(form.get('nombre')?.invalid && form.get('nombre')?.touched)"
        errorMessage="El nombre es requerido (mín. 2 caracteres)"
      ></app-input>

      <app-input
        label="País de Origen"
        formControlName="pais"
        placeholder="Ej: Ecuador, Colombia, Alemania..."
        [required]="true"
      ></app-input>
      
      <div class="flex justify-end gap-3 pt-4 border-t border-gray-100">
        <app-button type="button" variant="secondary" (clicked)="cerrarModal()" iconNameLeft="CANCEL">
          Cancelar
        </app-button>
        <app-button type="submit" variant="primary" [disabled]="form.invalid || guardando" iconNameLeft="SAVE">
          {{ guardando ? 'Guardando...' : 'Guardar Laboratorio' }}
        </app-button>
      </div>
    </form>
  </app-modal>
</div>

